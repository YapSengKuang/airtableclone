generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Base {
  id        String  @id @default(cuid())
  base_name String  @default("default base")
  user_id   String
  tables    Table[]
}

model Table {
  id         String  @id @default(cuid())
  base_id    String
  table_name String
  base       Base    @relation(fields: [base_id], references: [id])
  fields     Field[]
  rows       Row[]
}

model Field {
  id          String @id @default(cuid())
  table_id    String
  name        String
  type        String
  options     Json
  order_index Int
  table       Table  @relation(fields: [table_id], references: [id])
  cells       Cell[]
}

model Row {
  id       String @id @default(cuid())
  table_id String
  table    Table  @relation(fields: [table_id], references: [id])
  cells    Cell[]
}

model Cell {
  id       String @id @default(cuid())
  field_id String
  row_id   String
  value    String
  field    Field  @relation(fields: [field_id], references: [id])
  row      Row    @relation(fields: [row_id], references: [id])
}

enum FieldType {
  text
  number
  date
  checkbox
  single_select
  multi_select
  link
  formula
  lookup
  rollup
  attachment
}
